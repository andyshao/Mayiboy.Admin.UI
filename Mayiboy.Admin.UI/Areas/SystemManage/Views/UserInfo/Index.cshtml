
@{
    ViewBag.Title = "用户管理";
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
}

@section head_section{

}
@*面包屑*@
<div class="layui-card layadmin-header">
    <div class="layui-breadcrumb" lay-filter="breadcrumb" style="visibility: visible;">
        <a lay-href="">主页</a><span lay-separator="">/</span>
        <a><cite>组件</cite></a><span lay-separator="">/</span>
        <a><cite>数据表格</cite></a><span lay-separator="">/</span>
        <a><cite>数据表格的重载</cite></a>
    </div>
</div>

<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">
                    用户管理
                </div>
                <div class="layui-card-body" style="margin: 0px; padding: 0px;">
                    <div class="test-table-reload-btn" style="display: block;">
                        <div class="layui-btn-container" style="padding: 5px; text-align: left; float: left;">
                            <div class="layui-btn-group">
                                <button id="btnquery" class="layui-btn">查询</button>
                            </div>
                        </div>

                        <div class="layui-btn-container" style="padding: 5px; text-align: right;">
                            <div class="layui-btn-group">
                                <button id="btnadd" class="layui-btn">增加</button>
                            </div>
                        </div>
                    </div>

                    <table id="dttable" lay-filter="table-operate" data-url="@Url.Action("Query", "UserInfo", new {areas = "SystemManage"})" data-delurl="@Url.Action("Del", "UserInfo", new {areas = "SystemManage"})"></table>
                </div>
            </div>
        </div>
    </div>
</div>

@section foot_section{
    <script type="text/javascript">
        $(function () {
            var thisPage = {
                Buttons: {
                    UserInfoTable: null
                },
                Init: function () {

                },
                InitUserInfoTable: function () {
                    layui.use("table", function () {
                        var table = layui.table;

                        thisPage.Buttons.UserInfoTable = table.render({
                            elem: '#dttable',
                            url: $("#dttable").data("url"), //数据接口
                            page: true, //开启分页
                            even: true, //各行变色
                            cols: [
                            [
                            { field: 'id', title: '序号', type: "numbers", width: 60 },
                            { field: 'Name', title: '名称', width: 200 },
                            { field: 'Url', title: '地址' },
                            { field: 'Sort', title: '排序', width: 200 },
                            { field: 'Remark', title: '备注', width: 200 },
                            {
                                field: 'CreateTime',
                                title: '创建时间',
                                width: 180,
                                templet: function (row) {
                                    return $.Extend_formatDateTime(row.CreateTime);
                                }
                            },
                            {
                                field: 'look',
                                title: '操作',
                                width: 150,
                                templet: function (row) {
                                    var html = "";
                                    html += '<a href="javascript:;" class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>';
                                    html += '<a href="javascript:;" class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>';
                                    return html;
                                }
                            }
                            ]
                            ],
                            done: function (res, curr, count) {

                            }
                        });

                        //监听工具条
                        table.on('tool(table-operate)', function (obj) {
                            var data = obj.data; //获得当前行数据
                            var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
                            var tr = obj.tr; //获得当前行 tr 的DOM对象

                            switch (obj.event) {
                                case "edit":
                                    //thisPage.ShowEditPage(data);
                                    break;
                                case "del":
                                    layer.confirm('真的删除行吗？', function (index) {
                                    //thisPage.Del(data, index);
                                    });
                                    break;
                                default:
                            }
                        });

                    });
                }
            }

            thisPage.Init();
        })
    </script>
}
